# --- !Ups

CREATE TABLE IF NOT EXISTS "USER"
(
    ID SERIAL NOT NULL,
    USERNAME VARCHAR(30) NOT NULL UNIQUE,
    HASH VARCHAR(100) NOT NULL,
    PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS TRASH
(
    ID SERIAL NOT NULL,
    USER_ID INTEGER,
    VOLUME INTEGER NOT NULL ,
    DUMP_DATE DATE NOT NULL,
    PRIMARY KEY(ID)
);

ALTER TABLE TRASH
    ADD    FOREIGN KEY (USER_ID)
    REFERENCES "USER"(ID)
    MATCH SIMPLE
;

INSERT INTO "USER"(USERNAME, HASH) VALUES ('sallareznov', 'sallareznov');
INSERT INTO TRASH(USER_ID, VOLUME, DUMP_DATE) VALUES (1, 5, (SELECT TIMESTAMP 'tomorrow'));
INSERT INTO TRASH(USER_ID, VOLUME, DUMP_DATE) VALUES (1, 8, (SELECT TIMESTAMP 'tomorrow'));
INSERT INTO TRASH(USER_ID, VOLUME, DUMP_DATE) VALUES (1, 10, (SELECT TIMESTAMP 'tomorrow'));
    
# --- !Downs

DROP TABLE TRASH;
DROP TABLE "USER";